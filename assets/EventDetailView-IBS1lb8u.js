import{u as d}from"./eventStore-D2wmaiHS.js";import{_ as v,c as k,a as t,t as o,n as _,o as u,g as m,f,b as K,d as i,r as c,h as w,v as y,w as B}from"./index-B19q2GWF.js";import{u as p}from"./userStore-b_zsQdqV.js";const S={name:"ProgressBar",props:{current:{type:Number,required:!0},goal:{type:Number,required:!0}},computed:{progressPercentage(){const s=this.current/this.goal*100;return s>100?100:s}}},D={class:"progress-wrapper"},P={class:"progress-info"},T={class:"progress-bar"};function j(s,e,l,h,a,r){return u(),k("div",D,[t("div",P,[t("span",null,o(l.current)+" km",1),t("span",null,o(l.goal)+" km",1)]),t("div",T,[t("div",{class:"progress-fill",style:_({width:r.progressPercentage+"%"})},null,4)])])}const N=v(S,[["render",j],["__scopeId","data-v-c1bb7d91"]]),x={name:"EventDetailView",data(){return{kilometers:0,showThanks:!1}},components:{ProgressBar:N},computed:{event(){return d().getEventBySlug(this.$route.params.slug)},user(){return p()},isDisabled(){return this.kilometers<=0||this.kilometers>this.user.availableKm||this.user.availableKm===0}},watch:{event:{immediate:!0,handler(s){s||this.$router.replace({name:"not-found"})}},kilometers(s){s<0&&(this.kilometers=0),s>this.user.availableKm&&(this.kilometers=this.user.availableKm)}},methods:{addKm(){if(this.kilometers<=0)return;const s=d();p().useKilometers(this.kilometers)?(s.addKilometers(this.event.slug,this.kilometers),this.kilometers=0,this.showThanks=!0,setTimeout(()=>{this.showThanks=!1},3e3)):alert("NemÃ¡Å¡ dostatok dostupnÃ½ch kilometrov.")}}},C={key:0,class:"page"},V={class:"title"},E={class:"detail-grid"},q={class:"card"},I={class:"card highlight"},U={class:"available-km"},Z=["disabled"];function z(s,e,l,h,a,r){const g=c("ProgressBar"),b=c("v-alert");return r.event?(u(),k("div",C,[t("button",{class:"back",onClick:e[0]||(e[0]=n=>s.$router.back())}," â† SpÃ¤Å¥ "),t("h1",V,o(r.event.title),1),t("div",E,[t("div",q,[e[5]||(e[5]=t("h3",null,"O behu",-1)),t("p",null,o(r.event.description),1),t("p",null,[e[3]||(e[3]=t("strong",null,"DÃ¡tum:",-1)),i(" "+o(r.event.date),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"CelkovÃ½ poÄet kilometrov:",-1)),i(" "+o(r.event.totalKm)+" km",1)]),K(g,{current:r.event.totalKm,goal:1e3},null,8,["current"])]),t("div",I,[e[7]||(e[7]=t("h3",null,"Zapoj sa",-1)),e[8]||(e[8]=t("p",null,"Pridaj svoje kilometre a pomÃ´Å¾ dobrej veci.",-1)),t("p",U,[e[6]||(e[6]=i(" DostupnÃ© kilometre: ",-1)),t("strong",null,o(r.user.availableKm)+" km",1)]),w(t("input",{type:"number",min:"1","onUpdate:modelValue":e[1]||(e[1]=n=>a.kilometers=n),placeholder:"Zadaj poÄet km"},null,512),[[y,a.kilometers,void 0,{number:!0}]]),t("button",{onClick:e[2]||(e[2]=(...n)=>r.addKm&&r.addKm(...n)),disabled:r.isDisabled},"PridaÅ¥ kilometre",8,Z)]),a.showThanks?(u(),f(b,{key:0,type:"success",variant:"tonal",class:"mb-4"},{default:B(()=>[...e[9]||(e[9]=[i("ðŸ’š ÄŽakujeme! Tvoje kilometre boli ÃºspeÅ¡ne pridanÃ©.",-1)])]),_:1})):m("",!0)])])):m("",!0)}const A=v(x,[["render",z],["__scopeId","data-v-c121d0b9"]]);export{A as default};
